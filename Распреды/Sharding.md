# Шардирование

## Мотивация

* Ограниченный объём памяти на узле
* Ограниченная пропускная способность на узле
* Неограниченные запросы

=> Нужно горизонтальное масштабирование

## Идея

* Узлы хранят непересекающиеся подмноества всех данных
* Клиенты должны знать, на каком узле должен храниться данный ключ
	* Задача хранения $key \rightarrow node$ сведётся к начальной проблеме, если хранить в явном виде

## Наивный подход
* `node_id = hash(key) % K`
* При добавлении/удалении узла приходится перемещать ключи (каждый с вероятностью $\Theta(\frac{\large N}{\large N + 1})$, то есть почти $1$)
* Схожая проблема при удалении узла

## Подходы умнее
* [[Расширяемое побитовое хеширование]]
* [[Битовый бор]]