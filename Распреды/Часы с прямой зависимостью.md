# Часы с прямой зависимостью

Вид [[Логические часы|логических часов]]

Применим в централизованных алгоритмах, все общаются через координатора, хотим отслеживать зависимость между сообщениями остальных узлов

## Отношение прямой зависимости
$$
e \rightarrow_d f \Leftrightarrow (e < f) \lor (\exists m \in M: e \le snd(m) \land rcv(m) \le f)
$$

где

$$
\forall e, f \in E: e \rightarrow_d f \Leftrightarrow VC_d(e) < \Leftrightarrow VC_d(f)
$$

## Алгоритм 
Микс из [[Часы Лампорта|часов Лампорта]] и [[Часы векторные|векторных часов]]

* Храним вектор (по компоненте на каждый процесс)
* Отправляем *только своё* число
* При приёме числа:
	* Кладём его в вектор в компонент отправителя
	* В свой компонент пишем `max(current, new) + 1`