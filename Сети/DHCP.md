# DHCP

Клянчим у сети локальный [[IP address|IP адрес]]

#rfc 2131

* Поверх [[UDP]]
	* client 68
	* server 67
* Сам UPD живёт поверх [[IP]]
* Алгоритм получения
	* Клиент слушает на 0.0.0.0, отправляет **Discover** на [[IP address#Broadcast|Broadcast]]
	* Сервер отправит **Offer** на тот адрес, который только что выдал
		* Ближайший час ждёт решения
	* Клиенту пока этот адрес не принадлежит. Потенциально он принимает несколько **Offer**'ов, на тот, который понравился, шлёт **Request**
	* Сервер отправляет **Ack**. После этого можем использовать предложенный адрес, пока не истечёт время
* Раз в иногда надо делать **Request** (и ждать **Ack**) заново, чтоб наш адрес оставался за нами
* Вообще, сервер имеет право послать **Nak**
* На лине можно посмотреть выданные адреса в `/var/lib/dhcp/`

## DHCPv6
В общем-то, то же самое, просто адреса [[IP address#IPv6|IPv6]]

#rfc 