# Конвенции вызова

## cdecl

Передача параметров через стек

Сначала пушится последний

```
 foo ( int a,    char b )
[esp] [esp + 4] [esp + 8]
```

Аргументы очищаются вызвавшим

Значение возвращается в `edx:eax` (определена только та часть, которая соответствует возвращаемому размеру, т.е. если возвращается `char`, то определено только `al`, в остальной части может быть любой мусор)

### Callee saved registers

* `ebx`
* `ebp`
* `esi`
* `edi`

### Жирное возвращаемое значение

Caller выделяет память под возвращаемое значение, нулевым аргументом передаётся указатель на неё, этот указатель вернётся в `eax`

## stdcall

Тот же [[#cdecl]], только аргументы чистит вызванная функция

## thiscall

Собственно, тот же [[#cdecl]], но неявный аргумент `this` передаётся в `ecx`

## fastcall

Скорее идея, чем конвенция: передавать первые сколько-то аргументов в регистрах. Реализации кто во что горазд