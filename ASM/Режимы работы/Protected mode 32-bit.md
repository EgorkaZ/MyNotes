# Protected mode 32-bit

Пришёл i80386 (примерно так вещи и выглядят в текущем [[x86]])

* дескрипторы стали 32-битными
* появились 32-битные регистры
	* можно использовать даже в 16-битном мире через специальный префикс
* на самом деле сегментные регистры дохубитные, туда загружается дескриптор при обращении, но нам этого не покажут - _"теневая часть"_
	* в реальном режиме база переписывается по правилам `segment * 16`, остальное не трогается
* большинство 32-битных программ живёт в "плоской" модели памяти: база = 0, лимит = 4ГБ
	* дескрипторы из CS, DS, SS, ES, как правило, друг поверх друга в памяти (в смысле база с лимитом совпадают)
* в регистре FS (под виндой, под линём _наверно_ GS, под 64-битной виндой тоже GS) лежит дескриптор данного треда со всякой информацией о last error, тред-локальных штуках и вот этом вот всём

### v86
Подрежим защищённого режима, работающий на уровне 3-го кольца, работающий с адресами по правилам реального режима. Для исполнения древнючего кода