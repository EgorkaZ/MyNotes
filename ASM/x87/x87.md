# x87
  
[[x87 Регистры]]

## Перекладывание битиков

### FLD [ ]
Чтение из памяти/стека и пуш в стек

Требует явное указание размера, поскольку много чё умеет
* dword - 32-bit
* qword - 64-bit
* tbyte - 80-bit

### FILD [ ]
Чтение из памяти целых чисел

16, 32, 64 бита со знаком

Вообще, _I_ в названии значит знаковость

### FBLD [ ]
Для извращений. Не спрашивайте. Вы молодые, шутливые, вам все легко. Это не то. Это не Чикатило и даже не архивы спецслужб. Сюда лучше не лезть. Серьезно, любой из вас будет жалеть. Лучше закройте тему и забудьте что тут писалось. Я вполне понимаю что данным сообщением вызову дополнительный интерес, но хочу сразу предостеречь пытливых - стоп. Остальных просто не найдут.

### Загрузка констант
* FLDZ - 0
* FLD1 - 1
* FLDPI - pi

### FST(P) [ ]
Записывает в память значение со стека
Если есть P, то ещё происходит pop

### FIST(P) [ ]
Для интежеров

### FBSTP
Ну вы поняли

### FXCH
Поменять местами регистры. (Условно) бесплатная

### FCMOV
Условная загрузка в ST 0 (что-то в духе CMOV у нормальных людей)

## Арифметика

Один из аргументов всегда вершина стека

### FADD / FADDP / FIADD
~~Сложение~~ суммироваие

```
FADD st0, stX  # регистр в регистр
FADD stX, st0  # регистр в регистр (с перламутровыми пуговицами)
               # бывает FADDP
FADD st0, [ ]  # память в регистр
               # бывает FIADD
```

Результат записывается в первый аргумент

### FSUB / FSUBP / FISUB
Всё то же, но вычитание

### FSUBR
Вычитает из второго аргумента первый, пишет в первый

### FMUL / FDIV / FDIVR
Всё то же, но умножение / деление / деление как FSUBR

### FPREM(1)
Ищет остаток от деления st0 на st1

Идёт циклическим вычитанием до 64 раз, иначе грустит

FPREM1 отличается где-то там в районе округления

### FABS
Угадайте что? Правильно, это взятие модуля

### FCHS
Меняет знак

### FRNDINT
Округление в текущем режиме

### FSQRT
Квадратный корень

### FCOMI(P)
Сравнивает st0 с тем, что попросили. _P_ всё так же означает pop

Ставит флаги процессора для беззнаковых чисел (которые мы видели в x86 ?)

## Тригонометрия

### FSIN / FCOS
Синус и косинус

### FSINCOS
Считает и то, и другое, но чуть быстрее. Запихивает два значения на стек

### FPTAN / FPATAN
Тангенс и арктангенс

## Перекладываем стекпоинтер (ну тот, который st)
Просто двигаем, не пушим / попаем

### FINCSTP / FDECSTP
inc / dec, все дела

### FFREE
Пометить ячейку как свободную

## Ничего не делаем

### FNOP

## RDTSCP
edx:eax - количество ~тактов с включения компьютера